(function(){var f=new Function,g=function(a){var b=Object.create(this),c=_.bind(g,b);c.__proto__=_.merge(b,a||{});return c},h=function(a){var b=Object.create(this);b.el=$("<div>");var c=_.bind(h,b);c.__proto__=_.merge(b,a||{});c.registerEvents();return c},d=g,e=h;d.prototype=_.extend(d.prototype,EventEmitter.prototype,{extend:function(a){return this(a)},set:function(a,b){this[a]=b;this.emit("change")},get:function(a){return this[a]}});e.prototype=_.extend(e.prototype,{model:new d,template:_.template(""),
render:function(){this.el.html(this.template(this.model));return this},extend:function(a){return this(a)},on:{},events:{},change:function(){this.render()},registerEvents:function(){var a=this;_.forIn(this.events,function(b,c){b=b.trim();c=c.trim();var d;if(d=c.match(/([A-Za-z_][A-Za-z_0-9]+)\/([^\s]*)/))a.el.on(d[1],d[2],_.bindKey(a,b));else if(d=c.match(/([A-Za-z_][A-Za-z_0-9]+)/))a.el.on(d[1],_.bindKey(a,b))});this.model.on("change",function(){a.render()})}});f.prototype=_.extend(f.prototype,{Model:new d,
View:new e,CollectionView:new e({view:new e,collection:[],render:function(){var a=this;this.el.empty();_.each(this.collection,function(b){a.el.append(a.view({model:b}).render().el)})},add:function(a){this.collection.push(a);return this}})});window.Coil=new f;window.Model=d})();
